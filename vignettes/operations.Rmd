---
title: "Operations"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
number-sections: true
vignette: >
  %\VignetteIndexEntry{Operations}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Introduction

This vignette introduces the generic functions supported by dMatrix. 

## Loading library

```{r, message=F}
library(dbMatrix)
library(Matrix)
```

## dbMatrix generics

`dbMatrix` subclasses currently support basic generic functions listed below with support for more operations coming soon.

|          | dbSparseMatrix | dbDenseMatrix |
|----------|----------------|---------------|
| colSums  | âœ…             | âœ…            |
| rowSums  | âœ…             | âœ…            |
| colMeans | âœ…             | âœ…            |
| rowMeans | âœ…             | âœ…            |
| colSds   | ðŸŸ§             | âœ…            |
| rowSds   | ðŸŸ§             | âœ…            |
| t        | âœ…             | âœ…            |
| mean     | âœ…             | âœ…            |
| nrow     | âœ…             | âœ…            |
| ncol     | âœ…             | âœ…            |
| dims     | âœ…             | âœ…            |
| head     | âœ…             | âœ…            |
| tail     | âœ…             | âœ…            |
| ...      |                |               |

## dbSparse Matrix Operations

```{r eval=TRUE, message=FALSE, warning=FALSE}
# simulate a dgC matrix
dgc = dbMatrix:::sim_dgc()

# create dbSparseMatrix from the same dgc in memory
sparse = createDBMatrix(value = dgc, name = "sparse", class = "dbSparseMatrix", overwrite = TRUE)

# preview 
# show function aims to emulate the show method for dgCMatrix
sparse
```

### colMeans
```{r}
dbMatrix::colMeans(sparse)

all.equal(unname(dbMatrix::colMeans(sparse)), Matrix::colMeans(dgc))
```

### colSums
```{r}
dbMatrix::colSums(sparse)

all.equal(unname(dbMatrix::colSums(sparse)), Matrix::colSums(dgc))
```

### rowMeans
```{r}
dbMatrix::rowMeans(sparse)

all.equal(unname(dbMatrix::rowMeans(sparse)), Matrix::rowMeans(dgc))
```

### rowSums
```{r}
dbMatrix::rowSums(sparse)

all.equal(unname(dbMatrix::rowSums(sparse)), Matrix::rowSums(dgc))
```

### dim
```{r}
dim(sparse)

dim(dgc)
```

### transpose
```{r}
t(sparse)
```

## dbDenseMatrix Operations

```{r, eval=TRUE, message=FALSE, warning=FALSE}
dense = sim_dbDenseMatrix()

# preview
dense
```

### colMeans
```{r}
dbMatrix::colMeans(dense)
```

### colSums
```{r}
dbMatrix::colSums(dense)
```

### rowMeans
```{r}
dbMatrix::rowMeans(dense)
```

### rowSums
```{r}
dbMatrix::rowSums(dense)
```

### mean
```{r}
dbMatrix::mean(dense)
```

### dim
```{r}
dim(dense)
```

### transpose
```{r}
t(dense)
```


## Session Info

```{r eval=TRUE, message=FALSE}
sessionInfo()
```
